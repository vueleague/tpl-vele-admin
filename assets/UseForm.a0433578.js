var oe=Object.defineProperty,ae=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var L=(e,t,r)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))re.call(t,r)&&L(e,r,t[r]);if(G)for(var r of G(t))ne.call(t,r)&&L(e,r,t[r]);return e},j=(e,t)=>ae(e,le(t));import{q as V,R as A,C as p,r as k,o as u,j as f,H as m,s as C,t as E,F as x,S as se,J as R,K as T,L as I,O as s,T as ue,U as ce,W as S,y as B,x as H,N as $,X as q,Y as ie,Z as de,_ as me,$ as pe,a0 as fe,a1 as ge,a2 as be,a3 as _e,a4 as ve,a5 as he,a6 as ye,a7 as ke,a8 as Ve,G as J,a9 as Fe,aa as K,z as P,ab as Ee,ac as Pe,ad as Ce,B as z,P as w}from"./vendor.4c817bcf.js";import{i as D,a as xe}from"./index.ec03e5a4.js";import{t as Be}from"./log.b4d653eb.js";const we=V({props:{options:{type:Array,default:[]}},setup(e){const t=e,r=A(),c=p(()=>b(b({},t),r));return(a,l)=>{const o=k("ElOption"),n=k("ElSelect");return u(),f(n,T(I(s(c))),{default:m(()=>[t.options.length?(u(!0),C(x,{key:0},E(t.options,d=>(u(),f(o,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128)):se("",!0),R(a.$slots,"default")]),_:3},16)}}});var W=(e=>(e.Checkbox="Checkbox",e.CheckboxButton="CheckboxButton",e))(W||{}),X=(e=>(e.Radio="Radio",e.RadioButton="RadioButton",e))(X||{});const Re=V({props:{modelValue:{type:Array,required:!0},options:{type:Array,default:[]},type:{type:String,default:"Checkbox"}},setup(e){const t=e,r=p(()=>{const a=t.options;return a.length?D(a[0])?a.map(l=>({label:l,value:l})):a:[]}),c=p(()=>t.type===W.CheckboxButton?ue:ce);return(a,l)=>{const o=k("el-checkbox-group");return u(),f(o,$({modelValue:e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=n=>q(modelValue)?modelValue.value=n:null)},a.$attrs),{default:m(()=>[(u(!0),C(x,null,E(s(r),n=>(u(),f(S(s(c)),{key:n.value,label:n.value},{default:m(()=>[B(H(n.label),1)]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue"])}}}),Se=V({props:{modelValue:{type:String,required:!0},options:{type:Array,default:[]},type:{type:String,default:"Radio"}},setup(e){const t=e,r=p(()=>{const a=t.options;return a.length?D(a[0])?a.map(l=>({label:l,value:l})):a:[]}),c=p(()=>t.type===X.RadioButton?ie:de);return(a,l)=>{const o=k("el-radio-group");return u(),f(o,$({modelValue:e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=n=>q(modelValue)?modelValue.value=n:null)},a.$attrs),{default:m(()=>[(u(!0),C(x,null,E(s(r),n=>(u(),f(S(s(c)),{key:n.value,label:n.value},{default:m(()=>[B(H(n.label),1)]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue"])}}}),i=new Map;i.set("Input",me);i.set("InputNumber",pe);i.set("Select",we);i.set("RadioGroup",Se);i.set("CheckboxGroup",Re);i.set("Cascader",fe);i.set("DatePicker",ge);i.set("TimePicker",be);i.set("TimeSelect",_e);i.set("Switch",ve);i.set("Upload",he);i.set("Slider",ye);i.set("Rate",ke);i.set("Divider",Ve);const De=V({props:{schema:null,formProps:null,setFormModel:null},setup(e){const t=e,r=A(),{component:c,field:a,label:l}=t.schema,o=p(()=>!D(l)),n=p(()=>b({},t.schema.componentProps)),d=p({get(){return t.formProps.model[a]},set(v){t.setFormModel(a,v)}}),F=p(()=>{const v=j(b({},r),{prop:a});return D(l)&&(v.label=l),v});function _(){return t.schema.render?t.schema.render:i.get(c)}return(v,y)=>(u(),f(s(Fe),T(I(s(F))),J({default:m(()=>[(u(),f(S(_()),$({modelValue:s(d),"onUpdate:modelValue":y[0]||(y[0]=h=>q(d)?d.value=h:null)},s(n)),null,16,["modelValue"]))]),_:2},[s(o)?{name:"label",fn:m(()=>[(u(),f(S(s(l))))])}:void 0]),1040))}});function $e({formElRef:e}){async function t(){await s(e).resetFields(),K(()=>r())}async function r(o){await s(e).clearValidate(o)}async function c(o){return await s(e).validate(o)}async function a(o,n){return await s(e).validateField(o,n)}async function l(o){return await s(e).scrollToField(o)}return{resetFields:t,clearValidate:r,validate:c,validateField:a,scrollToField:l}}const Ae=V({emits:["register"],setup(e,{expose:t,emit:r}){const c=e,a=A(),l=P({}),o=P(null),n=p(()=>b(b(b({},a),c),l.value)),d=p(()=>{const{schemas:g}=s(l);return g||[]}),{validate:F,resetFields:_,clearValidate:v,scrollToField:y,validateField:h}=$e({propsRef:l,formElRef:o});function Y(g,N){l.value.model&&(l.value.model[g]=N)}function Z(g){l.value=b(b({},l.value),g)}const M={setProps:Z,validate:F,resetFields:_,clearValidate:v,scrollToField:y,validateField:h};return t(M),Ee(()=>{r("register",M)}),(g,N)=>{const Q=De,ee=k("el-form");return u(),f(ee,$({ref_key:"formRef",ref:o},s(n)),{default:m(()=>[R(g.$slots,"formHeader"),(u(!0),C(x,null,E(s(d),U=>(u(),f(Q,{key:U.field,schema:U,formProps:l.value,setFormModel:Y},J({_:2},[E(Object.keys(g.$slots),O=>({name:O,fn:m(te=>[R(g.$slots,O,T(I(te||{})))])}))]),1032,["schema","formProps"]))),128)),R(g.$slots,"formFooter")]),_:3},16)}}});function Te(e){const t=P(null),r=P(!1);function c(o){Pe(()=>{t.value=null,r.value=null}),!(s(r)&&xe()&&o===s(t))&&(t.value=o,r.value=!0,Ce(()=>e,()=>{e&&o.setProps(e)},{immediate:!0,deep:!0}))}async function a(){const o=s(t);return o||Be("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),await K(),o}return{register:c,methods:{async setProps(o){(await a()).setProps(o)},async validate(o){(await a()).validate(o)},async validateField(o,n){(await a()).validateField(o,n)},async resetFields(){(await a()).resetFields()},async clearValidate(){(await a()).clearValidate()},async scrollToField(o){(await a()).scrollToField(o)}}}}const Ie=B("submitForm"),qe=B("resetForm"),Me=B("clearValidate"),Le=V({setup(e){const t=[{field:"name",label:"\u59D3\u540D",component:"Input"},{field:"age",label:"\u5E74\u7EAA",component:"InputNumber"},{field:"city",label:"\u57CE\u5E02",component:"Select",componentProps:{options:[{label:"\u676D\u5DDE",value:1},{label:"\u4E0A\u6D77",value:2}]}},{field:"sex",label:"\u6027\u522B",component:"RadioGroup",componentProps:{options:[{label:"\u7537",value:1},{label:"\u5973",value:2}]}},{field:"like",label:"\u7231\u597D",component:"CheckboxGroup",componentProps:{options:[{label:"\u8DB3\u7403",value:1},{label:"\u7BEE\u7403",value:2},{label:"\u6E38\u6CF3",value:3}]}},{field:"date",label:"\u751F\u65E5",component:"DatePicker"}],r=z({name:"111",age:void 0,city:null,sex:null,like:[],date:""}),c=z({name:[{required:!0,message:"Please input name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],age:[{required:!0,message:"Please input age",trigger:"blur"}],like:[{type:"array",required:!0,message:"Please select like",trigger:"change"}],sex:[{type:"number",required:!0,message:"Please select sex",trigger:"change"}],city:[{type:"number",required:!0,message:"Please input city",trigger:"blur"}]}),{register:a,methods:l}=Te({model:r,rules:c,schemas:t}),o=P(),n=()=>{l.validate(_=>{if(_)console.log("submit!",_);else return console.log("error submit!",_),!1})},d=()=>{o.value.resetFields()},F=()=>{o.value.clearValidate()};return(_,v)=>{const y=Ae,h=k("ElButton");return u(),C(x,null,[w(y,{ref_key:"formRef",ref:o,onRegister:s(a)},null,8,["onRegister"]),w(h,{onClick:n},{default:m(()=>[Ie]),_:1}),w(h,{onClick:d},{default:m(()=>[qe]),_:1}),w(h,{onClick:F},{default:m(()=>[Me]),_:1})],64)}}});export{Le as default};
